package packTaller2NoOf;
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;


public class Main {
	private static Scanner scan;
	

	public static void main(String[] args) throws FileNotFoundException 
	{
		ArrayList<PC> listaPCS = new ArrayList<>();
		llenarlistaPCS("pcs.txt",listaPCS);		
		ArrayList<Puerto> listaPuertos = new ArrayList<>();
		rellenarlistaPuertos("puertos.txt",listaPuertos,listaPCS);
//	
//		for (PC p : listaPCS) {
//			System.out.println("PC : "+p.getIdPC());
//			for(Puerto puerto : p.getListaPuertosDelPc()) {
//				System.out.println("Puertos : "+ puerto.getNumeroPuerto()+ " Estado :" +puerto.getEstadoPuerto());
//
//			}
//		}
		scan = new Scanner(System.in);
		String menuElegido= "";
		int opcionElegida = 0;
		
		do {
			System.out.print("Eliga un menú Usurario o Administrador (U / A / S para salir): ");
			menuElegido = scan.nextLine().toUpperCase();
		
			switch (menuElegido) {
			
			case "U":
				System.out.println();
				System.out.println("Menú Usuario");
				System.out.println();
				System.out.println("1. Ver lista de PCS");
				System.out.println("2. Escanear un PC");
				System.out.println("3. Ver total de puertos abiertos en todos los PCS de la red");
				System.out.println("4. Ordenar PCS según IP");
				System.out.print("Ingrese una opcion > ");
				
				opcionElegida = Integer.valueOf(scan.nextLine());
				
				switch (opcionElegida) {//inicia switch Menú usuario
				case 1:
					System.out.println("-----------------------------");
					System.out.println("Lista de PCS:");
					System.out.println();
					mostrarListaPCS(listaPCS);
					break;
				case 2:
					System.out.println("-----------------------------");
					System.out.println("Escanear un PC");
					System.out.println();
					System.out.print("Ingrese un PC ( ej 'PC002' o 'PC010'): ");
					String pcElegido = scan.nextLine();
					
					mostrarPuertosPcElegido(pcElegido,listaPCS);
					System.out.println();
					

					break;
				case 3:
					System.out.println("-----------------------------");
					System.out.println("Total de puertos abiertos");
					System.out.println();
					break;
				case 4:
					System.out.println("-----------------------------");
					//
					System.out.println();
					break;
					
					
				}// aqui termina switch de opciones Menú usuario
				
				
				
				break;// break para salir de la opcion Usuario
				
				
			case "A":
				System.out.println();
				System.out.println("Menú Admin ");
				System.out.println();
				System.out.println("1. Ver lista completa de PCS junto a su información");
				System.out.println("2. Agregar o eliminar un PC de la lista");
				System.out.println("3. Clasificar PCS según su nivel de riesgo");
				System.out.print("Ingrese una opcion > ");
				opcionElegida = Integer.valueOf(scan.nextLine());
				
				switch (opcionElegida) {//inicia switch Menú usuario
				case 1:
					System.out.println("-----------------------------");
					System.out.println("Lista completa de PCS: ");
					System.out.println();
					
					break;
				case 2:
					System.out.println("-----------------------------");
					//
					System.out.println();

					break;
				case 3:
					System.out.println("-----------------------------");
					System.out.println("Total de puertos abiertos");
					System.out.println();
					break;
		
				
				}// aqui termina switch de opciones Menú admin 
				
				break;//break salir para la opcion admin
				
			case "S":
				break;
			default:
				System.out.println("Menú no valido, intene de nuevo.");
				break;//break 
			}//Hasta aqui llega el switch de los menus
				
		} while (!menuElegido.equalsIgnoreCase("S"));// while que rompe el progama si se elige "S"
		System.out.println("Saliendo...");
		
	}
	public static void llenarlistaPCS(String arch , ArrayList<PC> listapcs) throws FileNotFoundException 
	{
		Scanner scan = new Scanner(new File(arch));
		while(scan.hasNextLine()) {
			String linea = scan.nextLine();
			String[] partes = linea.split("\\|");
			
			String idPc = partes[0];
			String ipPc = partes[1];
			String sistemaOperativoPc = partes[2];
			
			PC pc = new PC(idPc, ipPc, sistemaOperativoPc);
			listapcs.add(pc);
			
		}scan.close();
	}
	public static void mostrarListaPCS(ArrayList<PC> listapcs) 
	{
		for (int i = 0; i< listapcs.size(); i ++) {
			String idPc = listapcs.get(i).getIdPC();
			String ipPc = listapcs.get(i).getIpPC();
			String sistema = listapcs.get(i).getSistemaOperativoPc();
			System.out.println("ID PC : "+idPc);
			System.out.println("IP PC : "+ipPc);
			System.out.println("Sistema operativo : "+sistema);
			System.out.println();
			
		}
	}
	public static void rellenarlistaPuertos(String arch, ArrayList<Puerto> listaPuertos, ArrayList<PC> listapc) throws FileNotFoundException 
	{
		Scanner scan = new Scanner(new File(arch));
		while(scan.hasNextLine()) {
			String linea = scan.nextLine();
			String[] partes = linea.split("\\|");
			
			String idPc = partes[0];
			int numeroPuerto = Integer.valueOf(partes[1]);
			String estadoPuerto = partes[2];
			
			Puerto puerto = new Puerto(idPc, numeroPuerto, estadoPuerto);
			listaPuertos.add(puerto);
			for (int i = 0; i<listapc.size(); i++) {
				if(listapc.get(i).getIdPC().equals(idPc)) {
					listapc.get(i).agregarPuertos(puerto);

				}
			}
			
		}
	}
	public static void mostrarPuertosPcElegido(String pc, ArrayList<PC> listapc)
	{
		
		for (PC p : listapc) {
			if(p.getIdPC().equalsIgnoreCase(pc)) {
				System.out.println();
				System.out.println("PC : "+p.getIdPC());
				for(Puerto puerto : p.getListaPuertosDelPc()) {
					System.out.println("Puertos : "+ puerto.getNumeroPuerto()+ ", Estado :" +puerto.getEstadoPuerto());
					}
			   }
			}	
	}
}
